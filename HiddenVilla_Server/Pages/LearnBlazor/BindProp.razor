@page "/bindprop"
@using HiddenVilla_Server.Model

<h3>Bind Prop</h3>

<h2 class="bg-light border p-2">
    Room list:
</h2>
Room: @Room.RoomName
<br />
Price: @Room.Price
<br />

<input type="number" @bind-value="@Room.Price" @bind-value:event="oninput" />
<br />

<input type="checkbox" @bind-value="@Room.IsActive" checked="@(Room.IsActive ? "checked" : null)" @bind-value:event="oninput" />: IsActive
<br />
<span>The room is @(Room.IsActive ? "active" : "inactive")</span>
<br />

<select @bind="SelectedRoomProp">
    @foreach (var item in Room.RoomProp)
    {
        <option value="@item.Name">@item.Name</option>
    }
</select>
<br />
<p>The selected room prop is: @SelectedRoomProp</p>


<div class="p-2">
    <h2>Assignment 2</h2>
    <table class="table table-dark">
        @foreach (var item in RoomList)
        {
            <tr>
                <td>
                    <input type="text" @bind-value="@item.RoomName" @bind-value:event="oninput">
                </td>
                <td>
                    <input type="text" @bind-value="@item.Price" @bind-value:event="oninput">
                </td>
                @foreach(var itemRoomProp in item.RoomProp)
                {
                    <td>@itemRoomProp.Name - @itemRoomProp.Value</td>
                }
            </tr>
        }
    </table>
    <br />
    @foreach(var item in RoomList)
    {
        <p>@item.RoomName's price is @item.Price</p>
    }
</div>

@code {
    string SelectedRoomProp = "";
    List<BlazorRoom> RoomList = new List<BlazorRoom>();

    Model.BlazorRoom Room = new BlazorRoom
        {
            Id = 1,
            Price = 499,
            RoomName = "Villa suite",
            IsActive = true,
            RoomProp = new List<BlazorRoomProp>
            {
                new BlazorRoomProp { Id = 1, Name = "Sq ft", Value = "100"},
                new BlazorRoomProp { Id = 2, Name = "Sec ft", Value = "33"}
            }
        };

    protected override void OnInitialized()
    {
        base.OnInitializedAsync();

        RoomList.Add(new BlazorRoom
            {
                Id = 1,
                Price = 499,
                RoomName = "Villa suite",
                IsActive = true,
                RoomProp = new List<BlazorRoomProp>
                {
                    new BlazorRoomProp { Id = 1, Name = "Sq ft", Value = "100"},
                    new BlazorRoomProp { Id = 2, Name = "Sec ft", Value = "33"}
                }
            });

        RoomList.Add(new BlazorRoom
            {
                Id = 2,
                Price = 299,
                RoomName = "Villa suite 2",
                IsActive = true,
                RoomProp = new List<BlazorRoomProp>
                {
                    new BlazorRoomProp { Id = 1, Name = "Sq ft", Value = "100"},
                    new BlazorRoomProp { Id = 2, Name = "Sec ft", Value = "33"}
                }
            });

        RoomList.Add(new BlazorRoom
            {
                Id = 3,
                Price = 399,
                RoomName = "Villa suite 3",
                IsActive = true,
                RoomProp = new List<BlazorRoomProp>
                {
                    new BlazorRoomProp { Id = 1, Name = "Sq ft", Value = "100"},
                    new BlazorRoomProp { Id = 2, Name = "Sec ft", Value = "33"}
                }
            });

    }
}
